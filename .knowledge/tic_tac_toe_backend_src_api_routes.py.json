{"is_source_file": true, "format": "Python (FastAPI with SQLAlchemy and Pydantic)", "description": "This file defines the REST API routes for a Tic Tac Toe backend application. It includes endpoint definitions for creating games, retrieving game states, making moves, and listing games for a user. It also contains Pydantic models for data validation, game logic functions, and interaction with database models.", "external_files": ["./db", "./models"], "external_methods": ["get_db", "select", "or_", "UserSchema.from_orm", "Game", "Move"], "published": ["router", "create_game", "get_game_state", "make_move", "list_games_for_user"], "classes": [{"name": "UserSchema", "description": "Pydantic model representing user data."}, {"name": "GameCreate", "description": "Pydantic model for creating a new game, specifying player IDs."}, {"name": "GameState", "description": "Pydantic model representing the game state, including player info and moves."}, {"name": "MoveRequest", "description": "Pydantic model for move requests, including player ID and move index."}, {"name": "GameListItem", "description": "Pydantic model for listing games with opponent info."}], "methods": [{"name": "str get_current_turn(state: str)", "description": "Determines which player's turn it is based on the current game state string.", "scope": "", "scopeKind": ""}, {"name": "Optional[Literal[\"X\",\"O\",\"draw\"]] check_winner(state: str)", "description": "Checks if the current game state has a winner or a draw.", "scope": "", "scopeKind": ""}, {"name": "GameState _to_gamestate(game: Game)", "description": "Converts a Game ORM instance to a GameState Pydantic model.", "scope": "", "scopeKind": ""}, {"name": "create_game(payload: GameCreate, db: AsyncSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_game_state(game_id: int, db: AsyncSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_games_for_user(user_id: int, db: AsyncSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "make_move(game_id: int, request: MoveRequest, db: AsyncSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["select", "or_", "UserSchema.from_orm", "get_db", "select", "db.execute", "db.scalars", "db.refresh", "db.add", "db.commit", "select", "or_", "db.execute", "db.scalars", "db.refresh", "select", "db.execute", "db.scalars", "db.refresh", "select", "or_", "db.execute", "db.scalars", "db.refresh"], "search-terms": ["FastAPI endpoints", "Game creation", "Move making", "Game state retrieval", "User's game list", "Game logic functions", "SQLAlchemy models", "Pydantic schemas"], "state": 2, "file_id": 12, "knowledge_revision": 31, "git_revision": "", "revision_history": [{"25": ""}, {"31": ""}], "ctags": [{"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^    class Config:$/", "language": "Python", "kind": "class", "scope": "GameListItem", "scopeKind": "class"}, {"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^    class Config:$/", "language": "Python", "kind": "class", "scope": "GameState", "scopeKind": "class"}, {"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^    class Config:$/", "language": "Python", "kind": "class", "scope": "UserSchema", "scopeKind": "class"}, {"_type": "tag", "name": "GameCreate", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^class GameCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "GameListItem", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^class GameListItem(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "GameState", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^class GameState(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "MoveRequest", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^class MoveRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserSchema", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^class UserSchema(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_to_gamestate", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def _to_gamestate(game: Game) -> GameState:$/", "language": "Python", "typeref": "typename:GameState", "kind": "function", "signature": "(game: Game)"}, {"_type": "tag", "name": "check_winner", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def check_winner(state: str) -> Optional[Literal[\"X\", \"O\", \"draw\"]]:$/", "language": "Python", "typeref": "typename:Optional[Literal[\"X\",\"O\",\"draw\"]]", "kind": "function", "signature": "(state: str)"}, {"_type": "tag", "name": "create_game", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^async def create_game(payload: GameCreate, db: AsyncSession = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: GameCreate, db: AsyncSession = Depends(get_db))"}, {"_type": "tag", "name": "get_current_turn", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^def get_current_turn(state: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(state: str)"}, {"_type": "tag", "name": "get_game_state", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^async def get_game_state(game_id: int, db: AsyncSession = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(game_id: int, db: AsyncSession = Depends(get_db))"}, {"_type": "tag", "name": "list_games_for_user", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^async def list_games_for_user(user_id: int, db: AsyncSession = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(user_id: int, db: AsyncSession = Depends(get_db))"}, {"_type": "tag", "name": "make_move", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^async def make_move(game_id: int, request: MoveRequest, db: AsyncSession = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(game_id: int, request: MoveRequest, db: AsyncSession = Depends(get_db))"}, {"_type": "tag", "name": "move_index", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^    move_index: int = Field(..., ge=0, le=8, description=\"Board index for the move (0-8)\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "MoveRequest", "scopeKind": "class"}, {"_type": "tag", "name": "moves", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^    moves: List[int] = Field(..., description=\"List of move indices\")$/", "language": "Python", "typeref": "typename:List[int]", "kind": "variable", "scope": "GameState", "scopeKind": "class"}, {"_type": "tag", "name": "orm_mode", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^        orm_mode = True$/", "language": "Python", "kind": "variable", "scope": "GameListItem.Config", "scopeKind": "class"}, {"_type": "tag", "name": "orm_mode", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^        orm_mode = True$/", "language": "Python", "kind": "variable", "scope": "GameState.Config", "scopeKind": "class"}, {"_type": "tag", "name": "orm_mode", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^        orm_mode = True$/", "language": "Python", "kind": "variable", "scope": "UserSchema.Config", "scopeKind": "class"}, {"_type": "tag", "name": "player_id", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^    player_id: int = Field(..., description=\"User ID making the move\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "MoveRequest", "scopeKind": "class"}, {"_type": "tag", "name": "player_o_id", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^    player_o_id: int = Field(..., description=\"User ID for O\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "GameCreate", "scopeKind": "class"}, {"_type": "tag", "name": "player_x_id", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^    player_x_id: int = Field(..., description=\"User ID for X\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "GameCreate", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/online-tic-tac-toe-a5ad6cbb/tic_tac_toe_backend/src/api/routes.py", "pattern": "/^router = APIRouter()$/", "language": "Python", "kind": "variable"}], "hash": "a998bdd03b91c86e413066b2383aed3e", "format-version": 4, "code-base-name": "tic_tac_toe_backend", "filename": "tic_tac_toe_backend/src/api/routes.py", "fields": [{"name": "int move_index", "scope": "MoveRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "List[int] moves", "scope": "GameState", "scopeKind": "class", "description": "unavailable"}, {"name": "orm_mode = True", "scope": "GameListItem.Config", "scopeKind": "class", "description": "unavailable"}, {"name": "int player_id", "scope": "MoveRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "int player_o_id", "scope": "GameCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "int player_x_id", "scope": "GameCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter()", "scope": "", "scopeKind": "", "description": "unavailable"}]}